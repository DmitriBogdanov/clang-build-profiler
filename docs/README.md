Language: C++23
License: MIT
Semver: 2.0.0
Docs: MkDocs
CLI Tool
Pre-build binaries

Windows: passing
Ubuntu: passing
MacOS: passing
FreeBSD: passing

# clang-build-report

> [!Warning]
> This project is under development, current documentations acts more like a specification than an accurate representation of existing features.

**clang-build-profiler** is a CLI tool that analyzes timings generated by `clang++ -ftime-trace` and generates a human-readable report, summarizing which parts of the build took the longest.

**Features:**

- Builds a tree of includes and their parse timings
- Builds a list of template instantiations and their timings
- Builds a list of classes, functions and their timings
- Summarizes the information above into digestible format
- Automatically analyzes CMake builds on per-target basis

**Output formats:**

- Terminal (aligned tables with color highlighting)
- Markdown (persistent reports with sections & t.o.c.)
- JSON (for custom integration needs)
- GUI (possible in the future)

**Quick showcase:**

- [Terminal output]()
- [Markdown output]()
- [JSON output]()
- [GUI output]()

## Motivation

In many cases, build times can be noticeably improved through a relatively small reorganization. To make this feasible, however, one would need a proper tool capable of profiling the build process.

`clang++ -ftime-trace` introduced in version `9.0` provides a perfect backend for such a tool, it generates traces in the [Chrome tracing format](https://docs.google.com/document/d/1CvAClvFfyA5R-PhYUmn5OOQtYMH4h6I0nSsKchNAySU), which can be even opened directly using Chrome `about:tracing`. However, raw traces are quite cumbersome to analyze in respect to the things that we actually care about, so I implemented a tool to summarize the key information.

## How to use

1. Download `clang-build-profiler` binary from the [Releases]()
2. Build a project using `clang++` with flags `-ftime-trace`, `-ftime-trace-verbose` enabled
3. Point the CLI tool at the [CMake]() build directory and select its desired output:

```sh
clang-build-profiler --build=build/ --output=terminal
```

4. Enjoy the report. For more details refer to documentation.

## Documentation

- [Supported CLI flags]()
- [Profiling a CMake build]()
- [Profiling a Visual Studio build]()
- [Profiling an individual translation unit]()
- [Building the project locally]()
- [Embedded dependencies]()
- [Technical limitations]()

## Dependencies

The source code of this project embeds several dependencies:

| Library                                         | Version    | License                                                      | Used for                      |
| ----------------------------------------------- | ---------- | ------------------------------------------------------------ | ----------------------------- |
| [UTL](https://github.com/DmitriBogdanov/UTL)    | **v8.3.3** | [MIT](https://github.com/DmitriBogdanov/UTL/blob/master/docs/LICENSE.md) | Formatting                    |
| [glaze](https://github.com/stephenberry/glaze)  | **v6.0.0** | [MIT](https://github.com/stephenberry/glaze/blob/main/LICENSE) | High-performance JSON parsing |
| [argparse](https://github.com/p-ranav/argparse) | **v3.2**   | [MIT](https://github.com/p-ranav/argparse/blob/master/LICENSE) | CLI argument parsing          |
| [fkYAML](https://github.com/fktn-k/fkYAML)      | **0.4.2**  | [MIT](https://github.com/fktn-k/fkYAML/blob/main/LICENSE.txt) | YAML parsing                  |

## Roadmap



## License

This project is licensed under the MIT License - see the [LICENSE.md](../LICENSE.md) for details.
